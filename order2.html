<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>訂購結帳 | 超甜蓮霧芒果</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    body {
      font-family: 'Noto Sans TC', 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom, #fffdf3, #fffef8);
    }
    .active-step {
      background-color: #f59e0b;
      color: white;
    }
  </style>
</head>
<!-- 🔥 熱銷商品選購區 -->
<section class="max-w-5xl mx-auto px-4 py-10">
  <h2 class="text-2xl font-bold text-center mb-6">熱銷禮盒</h2>
  <div class="grid grid-cols-1 sm:grid-cols-3 gap-6">
    <div class="border rounded-xl p-4 shadow hover:shadow-xl transition transform hover:-translate-y-1">
      <img src="15顆.jpg" alt="15粒裝" class="rounded mb-2">
      <h3 class="text-lg font-semibold">15粒裝</h3>
      <p class="text-amber-600 font-bold">NT$1300（含運）</p>
      <label class="block mt-2 text-sm">數量：
        <select class="mt-1 border rounded w-full px-2 py-1" data-name="15粒裝" data-price="1300">
          <option value="0">0 箱</option>
          <option value="1">1 箱</option>
          <option value="2">2 箱</option>
          <option value="3">3 箱</option>
          <option value="4">4 箱</option>
          <option value="5">5 箱</option>
        </select>
      </label>
    </div>

    <div class="border rounded-xl p-4 shadow hover:shadow-xl transition transform hover:-translate-y-1">
      <img src="18顆.jpg" alt="18粒裝" class="rounded mb-2">
      <h3 class="text-lg font-semibold">18粒裝</h3>
      <p class="text-amber-600 font-bold">NT$1100（含運）</p>
      <label class="block mt-2 text-sm">數量：
        <select class="mt-1 border rounded w-full px-2 py-1" data-name="18粒裝" data-price="1100">
          <option value="0">0 箱</option>
          <option value="1">1 箱</option>
          <option value="2">2 箱</option>
          <option value="3">3 箱</option>
          <option value="4">4 箱</option>
          <option value="5">5 箱</option>
        </select>
      </label>
    </div>

    <div class="border rounded-xl p-4 shadow hover:shadow-xl transition transform hover:-translate-y-1">
      <img src="20顆.jpg" alt="20粒裝" class="rounded mb-2">
      <h3 class="text-lg font-semibold">20粒裝</h3>
      <p class="text-amber-600 font-bold">NT$1000（含運）</p>
      <label class="block mt-2 text-sm">數量：
        <select class="mt-1 border rounded w-full px-2 py-1" data-name="20粒裝" data-price="1000">
          <option value="0">0 箱</option>
          <option value="1">1 箱</option>
          <option value="2">2 箱</option>
          <option value="3">3 箱</option>
          <option value="4">4 箱</option>
          <option value="5">5 箱</option>
        </select>
      </label>
    </div>
  </div>
</section>

<body class="pb-20">
  <div class="max-w-2xl mx-auto bg-white p-8 my-10 rounded-2xl shadow-xl border border-yellow-100">
    <div id="step-indicator" class="flex items-center justify-center space-x-4 mb-8">
      <div class="w-9 h-9 flex items-center justify-center rounded-full bg-gray-200 text-gray-500 font-bold">1</div>
      <div class="w-9 h-9 flex items-center justify-center rounded-full bg-gray-200 text-gray-500 font-bold">2</div>
      <div class="w-9 h-9 flex items-center justify-center rounded-full bg-gray-200 text-gray-500 font-bold">3</div>
    </div>

    <form id="checkoutForm" class="space-y-6">
      <div id="step1">
        <h2 class="text-2xl font-bold text-yellow-700 mb-4">🚚 運送與付款方式</h2>
        <div class="mb-6">
          <h2 class="text-xl font-bold text-gray-800 mb-2">🧺 購物車明細</h2>
          <ul id="cart-summary" class="list-disc pl-5 text-sm text-gray-700"></ul>
          <p id="cart-total" class="font-bold text-right mt-2 text-yellow-700">總金額：NT$0</p>
        </div>
        <div class="mb-4">
          <label class="block text-gray-700 font-medium mb-1">付款方式：</label>
          <label class="block mb-2"><input type="radio" name="pay" value="貨到付款" checked onchange="toggleATM()"> 貨到付款</label>
          <label class="block"><input type="radio" name="pay" value="ATM" onchange="toggleATM()"> ATM 轉帳</label>
        </div>
        <div id="atmCode" class="mb-4 hidden">
          <label class="block text-sm text-gray-700 font-medium">請填寫轉帳帳號末五碼：</label>
          <input type="text" maxlength="5" class="w-full border border-gray-300 px-3 py-2 rounded">
        </div>
        <div class="flex justify-between mt-8">
          <a href="#" class="px-5 py-2 rounded border border-yellow-500 text-yellow-600 hover:bg-yellow-100">回首頁</a>
          <button type="button" onclick="nextStep(2)" class="bg-yellow-500 text-white px-6 py-2 rounded hover:bg-yellow-600">下一步</button>
        </div>
      </div>

      <div id="step2" class="hidden">
        <h2 class="text-2xl font-bold text-yellow-700 mb-4">🏠 收件資訊</h2>
        <input required class="w-full border border-gray-300 px-4 py-2 rounded-lg mb-3" placeholder="收件人姓名">
        <input required class="w-full border border-gray-300 px-4 py-2 rounded-lg mb-3" placeholder="聯絡電話">
        <div class="mb-3">
          <label class="block text-gray-700 font-medium mb-1">地址：</label>
          <div class="flex space-x-2 mb-2">
            <select id="city" required class="w-1/2 border border-gray-300 px-3 py-2 rounded"></select>
            <select id="district" required class="w-1/2 border border-gray-300 px-3 py-2 rounded"></select>
          </div>
          <input required class="w-full border border-gray-300 px-3 py-2 rounded-lg" placeholder="街道地址（如：忠孝東路100號）">
        </div>
        <label class="block text-gray-700 font-medium mb-1">收件時間：</label>
        <label><input type="radio" name="time" class="form-radio" checked> 不指定</label>
        <label><input type="radio" name="time" class="form-radio"> 早上</label>
        <label><input type="radio" name="time" class="form-radio"> 下午</label>
        <div class="flex justify-between mt-8">
          <button type="button" onclick="nextStep(1)" class="px-5 py-2 rounded border border-gray-400 text-gray-600 hover:bg-gray-100">回上一步</button>
          <button type="button" onclick="nextStep(3)" class="bg-yellow-500 text-white px-6 py-2 rounded hover:bg-yellow-600">下一步</button>
        </div>
      </div>

      <div id="step3" class="hidden">
        <h2 class="text-2xl font-bold text-yellow-700 mb-4">📩 補充資料</h2>
        <label class="block text-gray-700 font-medium mb-1">性別：</label>
        <label><input type="radio" name="gender" class="form-radio" checked> 無</label>
        <label><input type="radio" name="gender" class="form-radio"> 先生</label>
        <label><input type="radio" name="gender" class="form-radio"> 小姐</label>
        <textarea placeholder="備註（可選填）" class="w-full border border-gray-300 px-4 py-2 rounded-lg mb-3"></textarea>
        <input required class="w-full border border-gray-300 px-4 py-2 rounded-lg mb-3" placeholder="Email（將寄送訂單通知）">
        <input type="date" class="w-full border border-gray-300 px-4 py-2 rounded-lg mb-3">
        <div class="flex justify-between mt-8">
          <button type="button" onclick="nextStep(2)" class="px-5 py-2 rounded border border-gray-400 text-gray-600 hover:bg-gray-100">回上一步</button>
          <button type="submit" class="bg-yellow-500 text-white px-6 py-2 rounded hover:bg-yellow-600">送出訂單</button>
        </div>
      </div>
    </form>
  </div>

  <script>
    function updateCartSummary() {
  const summary = document.getElementById("cart-summary");
  const total = document.getElementById("cart-total");
  summary.innerHTML = "";
  let totalAmount = 0;
  document.querySelectorAll('select[data-name]').forEach(select => {
    const count = parseInt(select.value);
    const name = select.dataset.name;
    const price = parseInt(select.dataset.price);
    if (count > 0) {
      const itemTotal = count * price;
      totalAmount += itemTotal;
      const li = document.createElement("li");
      li.textContent = `${name} × ${count} = NT$${itemTotal}`;
      summary.appendChild(li);
    }
  });
  total.textContent = `總金額：NT$${totalAmount}`;
}
document.querySelectorAll('select[data-name]').forEach(select => {
  select.addEventListener("change", updateCartSummary);
});

    function nextStep(step) {
      for (let i = 1; i <= 3; i++) {
        document.getElementById(`step${i}`)?.classList.add("hidden");
        document.querySelectorAll("#step-indicator div")[i - 1].classList.remove("active-step");
      }
      document.getElementById(`step${step}`)?.classList.remove("hidden");
      document.querySelectorAll("#step-indicator div")[step - 1].classList.add("active-step");
    }

    function toggleATM() {
      const atmField = document.getElementById("atmCode");
      const payMethod = document.querySelector("input[name='pay']:checked").value;
      atmField.classList.toggle("hidden", payMethod !== "ATM");
    }

    const taiwan = {
  '台北市': ['中正區', '大同區', '中山區', '松山區', '大安區', '萬華區', '信義區', '士林區', '北投區', '內湖區', '南港區', '文山區'],
  '新北市': ['板橋區', '三重區', '中和區', '永和區', '新莊區', '新店區', '土城區', '樹林區', '鶯歌區', '三峽區', '淡水區', '汐止區', '瑞芳區', '林口區', '五股區', '泰山區', '八里區', '深坑區', '石碇區', '坪林區', '三芝區', '石門區', '平溪區', '雙溪區', '貢寮區'],
  '基隆市': ['仁愛區', '信義區', '中正區', '中山區', '安樂區', '暖暖區', '七堵區'],
  '桃園市': ['桃園區', '中壢區', '平鎮區', '八德區', '楊梅區', '蘆竹區', '龜山區', '大園區', '大溪區', '觀音區', '新屋區', '龍潭區'],
  '新竹市': ['東區', '北區', '香山區'],
  '新竹縣': ['竹北市', '竹東鎮', '新埔鎮', '關西鎮', '湖口鄉', '新豐鄉', '芎林鄉', '寶山鄉', '五峰鄉', '橫山鄉', '尖石鄉', '北埔鄉', '峨眉鄉'],
  '苗栗縣': ['苗栗市', '頭份市', '竹南鎮', '後龍鎮', '通霄鎮', '苑裡鎮', '卓蘭鎮', '造橋鄉', '頭屋鄉', '公館鄉', '大湖鄉', '泰安鄉', '銅鑼鄉', '三義鄉', '西湖鄉', '南庄鄉', '三灣鄉', '獅潭鄉'],
  '台中市': ['中區', '東區', '南區', '西區', '北區', '西屯區', '南屯區', '北屯區', '豐原區', '大里區', '太平區', '東勢區', '大甲區', '清水區', '沙鹿區', '梧棲區', '后里區', '神岡區', '潭子區', '大雅區', '新社區', '石岡區', '外埔區', '大安區', '烏日區', '大肚區', '龍井區', '和平區'],
  '彰化縣': ['彰化市', '鹿港鎮', '和美鎮', '線西鄉', '伸港鄉', '福興鄉', '秀水鄉', '花壇鄉', '芬園鄉', '員林市', '溪湖鎮', '田中鎮', '大村鄉', '埔鹽鄉', '埔心鄉', '永靖鄉', '社頭鄉', '二水鄉', '北斗鎮', '田尾鄉', '埤頭鄉', '溪州鄉', '竹塘鄉', '二林鎮', '大城鄉', '芳苑鄉', '三民鄉'],
  '南投縣': ['南投市', '埔里鎮', '草屯鎮', '竹山鎮', '集集鎮', '名間鄉', '鹿谷鄉', '中寮鄉', '魚池鄉', '國姓鄉', '水里鄉', '信義鄉', '仁愛鄉'],
  '雲林縣': ['斗六市', '斗南鎮', '虎尾鎮', '西螺鎮', '土庫鎮', '北港鎮', '古坑鄉', '大埤鄉', '莿桐鄉', '林內鄉', '二崙鄉', '崙背鄉', '麥寮鄉', '東勢鄉', '褒忠鄉', '台西鄉', '元長鄉', '四湖鄉', '口湖鄉', '水林鄉'],
  '嘉義市': ['東區', '西區'],
  '嘉義縣': ['太保市', '朴子市', '布袋鎮', '大林鎮', '民雄鄉', '溪口鄉', '新港鄉', '六腳鄉', '東石鄉', '義竹鄉', '鹿草鄉', '水上鄉', '中埔鄉', '竹崎鄉', '梅山鄉', '番路鄉', '大埔鄉', '阿里山鄉'],
  '台南市': ['中西區', '東區', '南區', '北區', '安平區', '安南區', '永康區', '歸仁區', '新化區', '左鎮區', '玉井區', '楠西區', '南化區', '仁德區', '關廟區', '龍崎區', '官田區', '麻豆區', '佳里區', '西港區', '七股區', '將軍區', '學甲區', '北門區', '新營區', '後壁區', '白河區', '東山區', '六甲區', '下營區', '柳營區', '鹽水區', '善化區', '大內區', '山上區', '新市區', '安定區'],
  '高雄市': ['新興區', '前金區', '苓雅區', '鹽埕區', '鼓山區', '旗津區', '前鎮區', '三民區', '楠梓區', '小港區', '左營區', '仁武區', '大社區', '岡山區', '路竹區', '阿蓮區', '田寮區', '燕巢區', '橋頭區', '梓官區', '彌陀區', '永安區', '湖內區', '鳳山區', '大寮區', '林園區', '鳥松區', '大樹區', '旗山區', '美濃區', '六龜區', '甲仙區', '杉林區', '內門區', '茂林區', '桃源區', '那瑪夏區'],
  '屏東縣': ['屏東市', '潮州鎮', '東港鎮', '恆春鎮', '萬丹鄉', '長治鄉', '麟洛鄉', '九如鄉', '里港鄉', '鹽埔鄉', '高樹鄉', '萬巒鄉', '內埔鄉', '竹田鄉', '新埤鄉', '枋寮鄉', '新園鄉', '崁頂鄉', '林邊鄉', '南州鄉', '佳冬鄉', '琉球鄉', '車城鄉', '滿州鄉', '枋山鄉', '三地門鄉', '霧台鄉', '瑪家鄉', '泰武鄉', '來義鄉', '春日鄉', '獅子鄉', '牡丹鄉'],
  '台東縣': ['台東市', '成功鎮', '關山鎮', '卑南鄉', '鹿野鄉', '池上鄉', '東河鄉', '長濱鄉', '太麻里鄉', '大武鄉', '綠島鄉', '蘭嶼鄉', '延平鄉', '金峰鄉', '達仁鄉', '海端鄉'],
  '花蓮縣': ['花蓮市', '鳳林鎮', '玉里鎮', '新城鄉', '吉安鄉', '壽豐鄉', '光復鄉', '豐濱鄉', '瑞穗鄉', '萬榮鄉', '富里鄉', '秀林鄉', '卓溪鄉'],
  '宜蘭縣': ['宜蘭市', '羅東鎮', '蘇澳鎮', '頭城鎮', '礁溪鄉', '壯圍鄉', '員山鄉', '冬山鄉', '五結鄉', '三星鄉', '大同鄉', '南澳鄉'],
  '澎湖縣': ['馬公市', '湖西鄉', '白沙鄉', '西嶼鄉', '望安鄉', '七美鄉'],
  '金門縣': ['金城鎮', '金沙鎮', '金湖鎮', '金寧鄉', '烈嶼鄉', '烏坵鄉'],
  '連江縣': ['南竿鄉', '北竿鄉', '莒光鄉', '東引鄉']
};

    $(function () {
      const $city = $('#city');
      const $district = $('#district');
      Object.keys(taiwan).forEach(city => {
        $city.append(`<option value="${city}">${city}</option>`);
      });
      $city.on('change', function () {
        const selected = this.value;
        $district.empty();
        if (taiwan[selected]) {
          taiwan[selected].forEach(d => {
            $district.append(`<option value="${d}">${d}</option>`);
          });
        }
      });
      nextStep(1);
      toggleATM();
    });
  </script>
</body>
</html>
