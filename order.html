<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>è¨‚è³¼çµå¸³ | è¶…ç”œè“®éœ§èŠ’æœ</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Noto Sans TC', 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom, #fffdf3, #fffef8);
    }
    .active-step {
      background-color: #f59e0b; /* Amber 500 */
      color: white;
      box-shadow: 0 4px 10px rgba(245, 158, 11, 0.4);
      transform: scale(1.1);
    }
    .step-indicator-item {
      transition: all 0.3s ease-in-out;
      width: 44px; /* Slightly smaller for mobile */
      height: 44px; /* Slightly smaller for mobile */
      font-size: 1.125rem; /* text-lg */
    }
    @media (min-width: 768px) { /* md breakpoint */
        .step-indicator-item {
            width: 48px; /* w-12 */
            height: 48px; /* h-12 */
            font-size: 1.25rem; /* text-xl */
        }
    }

    input[type="text"], input[type="email"], select, textarea {
      padding: 0.75rem 1rem; /* py-3 px-4 */
      border-radius: 0.5rem; /* More rounded */
      border: 1px solid #d1d5db; /* Gray 300 */
      font-size: 1rem;
      min-height: 48px; /* Ensure sufficient height for touch */
      transition: all 0.2s ease-in-out;
    }
    input[type="text"]:focus, input[type="email"]:focus, select:focus, textarea:focus {
      border-color: #f59e0b; /* Amber 500 */
      box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.2);
      outline: none;
    }
    .btn-primary {
      background: linear-gradient(to right, #f59e0b, #fbbf24); /* Amber 500 to Yellow 400 */
      color: white;
      padding: 0.75rem 1.5rem; /* py-3 px-6 */
      border-radius: 9999px; /* Fully rounded */
      font-weight: 600;
      font-size: 1rem; /* text-base */
      transition: all 0.3s ease-in-out;
      box-shadow: 0 4px 10px rgba(245, 158, 11, 0.3);
      min-height: 48px; /* Ensure sufficient height for touch */
    }
    .btn-primary:hover {
      background: linear-gradient(to right, #ea900b, #facc15); /* Slightly darker on hover */
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(245, 158, 11, 0.4);
    }
    .btn-secondary {
      background-color: #e5e7eb; /* Gray 200 */
      color: #4b5563; /* Gray 700 */
      padding: 0.75rem 1.5rem; /* py-3 px-6 */
      border-radius: 9999px;
      font-weight: 600;
      font-size: 1rem; /* text-base */
      transition: all 0.3s ease-in-out;
      border: 1px solid #d1d5db;
      min-height: 48px; /* Ensure sufficient height for touch */
    }
    .btn-secondary:hover {
      background-color: #d1d5db; /* Gray 300 */
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    .product-card {
      transition: all 0.3s ease-in-out;
    }
    .product-card:hover {
      transform: translateY(-5px) scale(1.01); /* Lift and slightly enlarge on hover */
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.08); /* Stronger shadow on hover */
    }
  </style>
</head>
<body class="pb-20">
  <header class="bg-gradient-to-r from-yellow-400 to-amber-400 py-4 shadow-lg">
    <div class="max-w-7xl mx-auto px-6 flex justify-center items-center">
      <h1 class="text-2xl md:text-3xl font-extrabold text-white">ğŸ›’ è¨‚è³¼çµå¸³</h1>
    </div>
  </header>

<section class="max-w-5xl mx-auto px-4 md:px-6 py-8 md:py-10 mt-6 md:mt-8 bg-white rounded-2xl shadow-xl border border-yellow-100">
  <h2 class="text-2xl md:text-3xl font-bold text-center mb-6 md:mb-8 text-yellow-700">ğŸ ç²¾é¸ç¦®ç›’é¸è³¼</h2>
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
    <div class="border rounded-2xl p-4 md:p-6 shadow-md product-card bg-yellow-50">
      <img src="15é¡†.jpg" alt="15ç²’è£" class="rounded-lg mb-3 md:mb-4 w-full h-40 md:h-48 object-cover">
      <h3 class="text-lg md:text-xl font-semibold text-gray-900">æ¥µå“15ç²’è£</h3>
      <p class="text-amber-600 font-bold text-xl md:text-2xl mt-1">NT$1300<span class="text-xs md:text-sm text-gray-500">ï¼ˆå«é‹ï¼‰</span></p>
      <label class="block mt-3 md:mt-4 text-sm md:text-md text-gray-700">æ•¸é‡ï¼š
        <select class="mt-2 border border-gray-300 rounded-lg w-full px-3 py-2 bg-white" data-name="15ç²’è£" data-price="1300" id="first">
          <option value="0">0 ç®±</option><option value="1">1 ç®±</option><option value="2">2 ç®±</option>
          <option value="3">3 ç®±</option><option value="4">4 ç®±</option><option value="5">5 ç®±</option>
        </select>
      </label>
    </div>
    <div class="border rounded-2xl p-4 md:p-6 shadow-md product-card bg-yellow-50">
      <img src="18é¡†.jpg" alt="18ç²’è£" class="rounded-lg mb-3 md:mb-4 w-full h-40 md:h-48 object-cover">
      <h3 class="text-lg md:text-xl font-semibold text-gray-900">ç²¾é¸18ç²’è£</h3>
      <p class="text-amber-600 font-bold text-xl md:text-2xl mt-1">NT$1100<span class="text-xs md:text-sm text-gray-500">ï¼ˆå«é‹ï¼‰</span></p>
      <label class="block mt-3 md:mt-4 text-sm md:text-md text-gray-700">æ•¸é‡ï¼š
        <select class="mt-2 border border-gray-300 rounded-lg w-full px-3 py-2 bg-white" data-name="18ç²’è£" data-price="1100" id="second">
          <option value="0">0 ç®±</option><option value="1">1 ç®±</option><option value="2">2 ç®±</option>
          <option value="3">3 ç®±</option><option value="4">4 ç®±</option><option value="5">5 ç®±</option>
        </select>
      </label>
    </div>
    <div class="border rounded-2xl p-4 md:p-6 shadow-md product-card bg-yellow-50">
      <img src="20é¡†.jpg" alt="20ç²’è£" class="rounded-lg mb-3 md:mb-4 w-full h-40 md:h-48 object-cover">
      <h3 class="text-lg md:text-xl font-semibold text-gray-900">è¶…å€¼20ç²’è£</h3>
      <p class="text-amber-600 font-bold text-xl md:text-2xl mt-1">NT$1000<span class="text-xs md:text-sm text-gray-500">ï¼ˆå«é‹ï¼‰</span></p>
      <label class="block mt-3 md:mt-4 text-sm md:text-md text-gray-700">æ•¸é‡ï¼š
        <select class="mt-2 border border-gray-300 rounded-lg w-full px-3 py-2 bg-white" data-name="20ç²’è£" data-price="1000" id="third">
          <option value="0">0 ç®±</option><option value="1">1 ç®±</option><option value="2">2 ç®±</option>
          <option value="3">3 ç®±</option><option value="4">4 ç®±</option><option value="5">5 ç®±</option>
        </select>
      </label>
    </div>
  </div>
</section>

<div class="max-w-2xl mx-auto bg-white p-6 md:p-8 my-8 md:my-10 rounded-2xl shadow-xl border border-yellow-100">
  <div id="step-indicator" class="flex items-center justify-center space-x-4 md:space-x-6 mb-8 md:mb-10">
    <div class="step-indicator-item w-11 h-11 md:w-12 md:h-12 flex items-center justify-center rounded-full bg-gray-200 text-gray-500 font-bold text-lg md:text-xl">1</div>
    <div class="step-indicator-item w-11 h-11 md:w-12 md:h-12 flex items-center justify-center rounded-full bg-gray-200 text-gray-500 font-bold text-lg md:text-xl">2</div>
    <div class="step-indicator-item w-11 h-11 md:w-12 md:h-12 flex items-center justify-center rounded-full bg-gray-200 text-gray-500 font-bold text-lg md:text-xl">3</div>
  </div>

  <form id="checkoutForm" class="space-y-5 md:space-y-6" method="POST" action="https://script.google.com/macros/s/AKfycbxEkh0kjv2HUFKHeLTQwBwBbV5KqzlQsqwUIiWlv4vEUcI5yPMuLInMPh_BlwNuaZ3y/exec">
    <div id="step1">
      <h2 class="text-2xl md:text-3xl font-bold text-yellow-700 mb-5 md:mb-6 flex items-center">ğŸšš é‹é€èˆ‡ä»˜æ¬¾æ–¹å¼</h2>
      <div id="cart-section" class="mb-6 md:mb-8 p-5 md:p-6 bg-yellow-50 rounded-xl border border-yellow-200 shadow-inner">
        <h3 class="text-lg md:text-xl font-bold text-gray-800 mb-3 md:mb-4 flex items-center">ğŸ§º è³¼ç‰©è»Šæ˜ç´°</h3>
        <ul id="cart-summary" class="list-disc pl-5 md:pl-6 text-sm md:text-base text-gray-700 leading-relaxed"></ul>
        <p id="cart-total" class="font-extrabold text-right mt-3 md:mt-4 text-yellow-800 text-xl md:text-2xl">ç¸½é‡‘é¡ï¼šNT$0</p>
        <input type="hidden" name="order_first" id="order_first">
        <input type="hidden" name="order_second" id="order_second">
        <input type="hidden" name="order_third" id="order_third">

        <div class="mt-6 md:mt-8 p-4 bg-yellow-100 rounded-lg text-sm md:text-base text-gray-700">
          <p class="font-semibold text-yellow-800 mb-2">ğŸ’¡ è¨‚è³¼é‡åˆ°å•é¡Œï¼Ÿ</p>
          <p class="mb-3">å¦‚æœè¨‚è³¼éç¨‹ä¸­æœ‰ä»»ä½•ç–‘å•æˆ–ç‰¹æ®Šéœ€æ±‚ï¼Œæ­¡è¿é€éæˆ‘å€‘çš„ LINE å®˜æ–¹å¸³è™Ÿè¯ç¹«æˆ‘å€‘ï¼</p>
          <a href="https://lin.ee/eWtrwEi" target="_blank" class="inline-flex items-center bg-green-500 text-white px-4 py-2 rounded-full font-bold hover:bg-green-600 transition duration-300">
            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-4a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V7a1 1 0 011-1z" clip-rule="evenodd"></path></svg>
            LINE å®¢æœï¼šé»æ­¤åŠ å¥½å‹
          </a>
        </div>
      </div>
      <div class="mb-5 md:mb-6">
        <label class="block text-gray-700 font-semibold mb-2 text-base md:text-lg">ä»˜æ¬¾æ–¹å¼ï¼š</label>
        <div class="flex flex-col space-y-2">
          <label class="inline-flex items-center text-sm md:text-md text-gray-800">
            <input type="radio" name="pay" value="è²¨åˆ°ä»˜æ¬¾" checked onchange="toggleATM()" class="form-radio text-yellow-500 h-5 w-5">
            <span class="ml-2">è²¨åˆ°ä»˜æ¬¾</span>
          </label>
          <label class="inline-flex items-center text-sm md:text-md text-gray-800">
            <input type="radio" name="pay" value="ATM" onchange="toggleATM()" class="form-radio text-yellow-500 h-5 w-5">
            <span class="ml-2">ATM è½‰å¸³</span>
          </label>
        </div>
      </div>
      <div id="atmCode" class="mb-5 md:mb-6 hidden">
        <label class="block text-sm md:text-md text-gray-700 font-medium mb-2">è«‹å¡«å¯«è½‰å¸³å¸³è™Ÿæœ«äº”ç¢¼ï¼š</label>
        <input type="text" name="atm_code" maxlength="5" class="w-full" placeholder="éŠ€è¡Œå¸³è™Ÿæœ«äº”ç¢¼">
      </div>
      <div class="flex justify-between mt-8 md:mt-10">
        <a href="index.html" class="btn-secondary">å›é¦–é </a>
        <button type="button" onclick="nextStep(2)" class="btn-primary">ä¸‹ä¸€æ­¥</button>
      </div>
    </div>

    <div id="step2" class="hidden">
      <h2 class="text-2xl md:text-3xl font-bold text-yellow-700 mb-5 md:mb-6 flex items-center">ğŸ  æ”¶ä»¶è³‡è¨Š</h2>
      <input name="order_name" required class="w-full mb-3 md:mb-4" placeholder="æ”¶ä»¶äººå§“å *">
      <input name="order_phone" required class="w-full mb-3 md:mb-4" placeholder="è¯çµ¡é›»è©± *">
      <div class="mb-3 md:mb-4">
        <label class="block text-gray-700 font-semibold mb-2 text-base md:text-lg">åœ°å€ï¼š</label>
        <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4 mb-3 md:mb-4">
          <select id="city" required class="w-full sm:w-1/2 bg-white"></select>
          <select id="district" required class="w-full sm:w-1/2 bg-white"></select>
        </div>
        <input id="street" name="order_address" required class="w-full" placeholder="è¡—é“åœ°å€ï¼ˆå¦‚ï¼šå¿ å­æ±è·¯100è™Ÿï¼‰*">
      </div>
      <label class="block text-gray-700 font-semibold mb-2 text-base md:text-lg">æ”¶ä»¶æ™‚é–“ï¼š</label>
      <div class="flex flex-col space-y-2">
        <label class="inline-flex items-center text-sm md:text-md text-gray-800">
          <input type="radio" name="order_pt" value="ä¸æŒ‡å®š" checked class="form-radio text-yellow-500 h-5 w-5">
          <span class="ml-2">ä¸æŒ‡å®š</span>
        </label>
        <label class="inline-flex items-center text-sm md:text-md text-gray-800">
          <input type="radio" name="order_pt" value="æ—©ä¸Š" class="form-radio text-yellow-500 h-5 w-5">
          <span class="ml-2">æ—©ä¸Š</span>
        </label>
        <label class="inline-flex items-center text-sm md:text-md text-gray-800">
          <input type="radio" name="order_pt" value="ä¸‹åˆ" class="form-radio text-yellow-500 h-5 w-5">
          <span class="ml-2">ä¸‹åˆ</span>
        </label>
      </div>
      <div class="flex justify-between mt-8 md:mt-10">
        <button type="button" onclick="nextStep(1)" class="btn-secondary">å›ä¸Šä¸€æ­¥</button>
        <button type="button" onclick="nextStep(3)" class="btn-primary">ä¸‹ä¸€æ­¥</button>
      </div>
    </div>

    <div id="step3" class="hidden">
      <h2 class="text-2xl md:text-3xl font-bold text-yellow-700 mb-5 md:mb-6 flex items-center">ğŸ“© è£œå……è³‡æ–™</h2>
      <label class="block text-gray-700 font-semibold mb-2 text-base md:text-lg">ç¨±è¬‚ï¼š</label>
      <div class="flex flex-col space-y-2 mb-3 md:mb-4">
        <label class="inline-flex items-center text-sm md:text-md text-gray-800">
          <input type="radio" name="gender" value="ç„¡" class="form-radio text-yellow-500 h-5 w-5" checked>
          <span class="ml-2">ç„¡</span>
        </label>
        <label class="inline-flex items-center text-sm md:text-md text-gray-800">
          <input type="radio" name="gender" value="å…ˆç”Ÿ" class="form-radio text-yellow-500 h-5 w-5">
          <span class="ml-2">å…ˆç”Ÿ</span>
        </label>
        <label class="inline-flex items-center text-sm md:text-md text-gray-800">
          <input type="radio" name="gender" value="å°å§" class="form-radio text-yellow-500 h-5 w-5">
          <span class="ml-2">å°å§</span>
        </label>
      </div>
      <textarea name="order_ps" placeholder="å‚™è¨»ï¼ˆå¯é¸å¡«ï¼Œä¾‹å¦‚ï¼šæŒ‡å®šé€é”æ—¥æœŸã€ç‰¹æ®Šéœ€æ±‚ç­‰ï¼‰" rows="4" class="w-full mb-3 md:mb-4"></textarea>
      <input name="order_email" type="email" required class="w-full mb-3 md:mb-4" placeholder="Emailï¼ˆå°‡å¯„é€è¨‚å–®é€šçŸ¥ï¼‰*">
      <div class="flex justify-between mt-8 md:mt-10">
        <button type="button" onclick="nextStep(2)" class="btn-secondary">å›ä¸Šä¸€æ­¥</button>
        <button type="submit" class="btn-primary">é€å‡ºè¨‚å–® âœ…</button>
      </div>
    </div>
  </form>
</div>

<script>
  function updateCartSummary() {
    const summary = document.getElementById("cart-summary");
    const total = document.getElementById("cart-total");
    summary.innerHTML = "";
    let totalAmount = 0;

    // å°‡å•†å“æ•¸é‡å¯«å…¥éš±è—æ¬„ä½ï¼Œä»¥ä¾¿æäº¤
    document.getElementById("order_first").value = document.getElementById("first").value;
    document.getElementById("order_second").value = document.getElementById("second").value;
    document.getElementById("order_third").value = document.getElementById("third").value;

    let orderDetails = []; // ç”¨ä¾†å„²å­˜è¨‚è³¼å•†å“çš„è©³ç´°è³‡è¨Šï¼Œä»¥ä¾¿å‚³é€åˆ° Google Sheet

    document.querySelectorAll('select[data-name]').forEach(select => {
      const count = parseInt(select.value);
      const name = select.dataset.name;
      const price = parseInt(select.dataset.price);
      if (count > 0) {
        const itemTotal = count * price;
        totalAmount += itemTotal;
        const li = document.createElement("li");
        li.textContent = `${name} Ã— ${count} ç®± = NT$${itemTotal}`;
        summary.appendChild(li);
        orderDetails.push(`${name} (${count}ç®±)`); // æ ¼å¼åŒ–å•†å“è³‡è¨Š
      }
    });
    total.textContent = `ç¸½é‡‘é¡ï¼šNT$${totalAmount}`;

    // å°‡è¨‚è³¼çš„å•†å“æ¸…å–®ç¸½çµæˆä¸€å€‹å­—ä¸²ï¼Œæ”¾å…¥éš±è—æ¬„ä½ï¼Œæ–¹ä¾¿å¾Œç«¯æ¥æ”¶
    if (orderDetails.length > 0) {
      const allProductsInput = document.createElement('input');
      allProductsInput.type = 'hidden';
      allProductsInput.name = 'all_products';
      allProductsInput.value = orderDetails.join(', '); // ç”¨é€—è™Ÿåˆ†éš”
      document.getElementById('checkoutForm').appendChild(allProductsInput);
    } else {
      // å¦‚æœæ²’æœ‰å•†å“ï¼Œç§»é™¤è©²éš±è—æ¬„ä½
      const existingAllProductsInput = document.querySelector('input[name="all_products"]');
      if (existingAllProductsInput) {
        existingAllProductsInput.remove();
      }
    }


    if (totalAmount === 0) {
      summary.innerHTML = "<li class='text-gray-500'>è³¼ç‰©è»Šæ˜¯ç©ºçš„ï¼Œè«‹é¸æ“‡å•†å“æ•¸é‡ã€‚</li>";
      document.querySelector('#step1 .btn-primary').disabled = true; // Disable "Next Step" button if cart is empty
      document.querySelector('#step1 .btn-primary').classList.add('opacity-50', 'cursor-not-allowed');
    } else {
      document.querySelector('#step1 .btn-primary').disabled = false;
      document.querySelector('#step1 .btn-primary').classList.remove('opacity-50', 'cursor-not-allowed');
    }
  }

  function nextStep(step) {
    // Basic validation for Step 1 before moving to Step 2
    if (step === 2) {
      const totalAmount = parseInt(document.getElementById("cart-total").textContent.replace('ç¸½é‡‘é¡ï¼šNT$', ''));
      if (totalAmount === 0) {
        alert("è«‹è‡³å°‘é¸æ“‡ä¸€é …å•†å“ï¼");
        return;
      }
    }

    // Basic validation for Step 2 before moving to Step 3
    if (step === 3) {
      const name = document.querySelector('input[name="order_name"]').value.trim();
      const phone = document.querySelector('input[name="order_phone"]').value.trim();
      const city = document.getElementById('city').value;
      const district = document.getElementById('district').value;
      const street = document.getElementById('street').value.trim();

      if (!name || !phone || !city || !district || !street) {
        alert("è«‹å¡«å¯«æ‰€æœ‰å¿…å¡«çš„æ”¶ä»¶è³‡è¨Šï¼");
        return;
      }
    }

    for (let i = 1; i <= 3; i++) {
      document.getElementById(`step${i}`)?.classList.add("hidden");
      document.querySelectorAll("#step-indicator div")[i - 1].classList.remove("active-step");
    }
    document.getElementById(`step${step}`)?.classList.remove("hidden");
    document.querySelectorAll("#step-indicator div")[step - 1].classList.add("active-step");
    // Only show cart summary on step 1
    document.getElementById("cart-section").classList.toggle("hidden", step !== 1);
  }

  function toggleATM() {
    const atmField = document.getElementById("atmCode");
    const payMethod = document.querySelector("input[name='pay']:checked").value;
    atmField.classList.toggle("hidden", payMethod !== "ATM");
  }

  document.querySelectorAll('select[data-name]').forEach(select => {
    select.addEventListener("change", updateCartSummary);
  });

  document.getElementById("checkoutForm").addEventListener("submit", function (e) {
    e.preventDefault();
    const form = e.target;
    const formData = new FormData(form);

    // Client-side validation for email in step 3
    const emailInput = document.querySelector('input[name="order_email"]');
    if (!emailInput.value.includes('@') || !emailInput.value.includes('.')) {
        alert("è«‹è¼¸å…¥æœ‰æ•ˆçš„ Email åœ°å€ï¼");
        return;
    }

    // Add a loading state to the button
    const submitButton = document.querySelector('#step3 button[type="submit"]');
    submitButton.textContent = 'é€å‡ºä¸­...';
    submitButton.disabled = true;
    submitButton.classList.add('opacity-50', 'cursor-not-allowed');

    fetch(form.action, {
      method: "POST",
      body: formData
    }).then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok.');
        }
        return response.text();
    })
    .then(data => {
      alert("âœ… è¨‚å–®å·²é€å‡ºï¼Œæ„Ÿè¬æ‚¨çš„è¨‚è³¼ï¼æˆ‘å€‘å°‡ç›¡å¿«ç‚ºæ‚¨è™•ç†ã€‚");
      form.reset();
      nextStep(1); // Go back to step 1 after submission
      updateCartSummary(); // Reset cart summary
    }).catch(err => {
      alert("âŒ è¨‚å–®é€å‡ºå¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ï¼" + err.message);
      console.error(err);
    }).finally(() => {
        // Re-enable the button regardless of success or failure
        submitButton.textContent = 'é€å‡ºè¨‚å–® âœ…';
        submitButton.disabled = false;
        submitButton.classList.remove('opacity-50', 'cursor-not-allowed');
    });
  });

  // Taiwan address data
  const taiwan = {
  'å°åŒ—å¸‚': ['ä¸­æ­£å€', 'å¤§åŒå€', 'ä¸­å±±å€', 'æ¾å±±å€', 'å¤§å®‰å€', 'è¬è¯å€', 'ä¿¡ç¾©å€', 'å£«æ—å€', 'åŒ—æŠ•å€', 'å…§æ¹–å€', 'å—æ¸¯å€', 'æ–‡å±±å€'],
  'æ–°åŒ—å¸‚': ['æ¿æ©‹å€', 'ä¸‰é‡å€', 'ä¸­å’Œå€', 'æ°¸å’Œå€', 'æ–°èŠå€', 'æ–°åº—å€', 'åœŸåŸå€', 'æ¨¹æ—å€', 'é¶¯æ­Œå€', 'ä¸‰å³½å€', 'æ·¡æ°´å€', 'æ±æ­¢å€', 'ç‘èŠ³å€', 'æ—å£å€', 'äº”è‚¡å€', 'æ³°å±±å€', 'å…«é‡Œå€', 'æ·±å‘å€', 'çŸ³ç¢‡å€', 'åªæ—å€', 'ä¸‰èŠå€', 'çŸ³é–€å€', 'å¹³æºªå€', 'é›™æºªå€', 'è²¢å¯®å€'],
  'åŸºéš†å¸‚': ['ä»æ„›å€', 'ä¿¡ç¾©å€', 'ä¸­æ­£å€', 'ä¸­å±±å€', 'å®‰æ¨‚å€', 'æš–æš–å€', 'ä¸ƒå µå€'],
  'æ¡ƒåœ’å¸‚': ['æ¡ƒåœ’å€', 'ä¸­å£¢å€', 'å¹³é®å€', 'å…«å¾·å€', 'æ¥Šæ¢…å€', 'è˜†ç«¹å€', 'é¾œå±±å€', 'å¤§åœ’å€', 'å¤§æºªå€', 'è§€éŸ³å€', 'æ–°å±‹å€', 'é¾æ½­å€'],
  'æ–°ç«¹å¸‚': ['æ±å€', 'åŒ—å€', 'é¦™å±±å€'],
  'æ–°ç«¹ç¸£': ['ç«¹åŒ—å¸‚', 'ç«¹æ±é®', 'æ–°åŸ”é®', 'é—œè¥¿é®', 'æ¹–å£é„‰', 'æ–°è±é„‰', 'èŠæ—é„‰', 'å¯¶å±±é„‰', 'äº”å³°é„‰', 'æ©«å±±é„‰', 'å°–çŸ³é„‰', 'åŒ—åŸ”é„‰', 'å³¨çœ‰é„‰'],
  'è‹—æ —ç¸£': ['è‹—æ —å¸‚', 'é ­ä»½å¸‚', 'ç«¹å—é®', 'å¾Œé¾é®', 'é€šéœ„é®', 'è‹‘è£¡é®', 'å“è˜­é®', 'é€ æ©‹é„‰', 'é ­å±‹é„‰', 'å…¬é¤¨é„‰', 'å¤§æ¹–é„‰', 'æ³°å®‰é„‰', 'éŠ…é‘¼é„‰', 'ä¸‰ç¾©é„‰', 'è¥¿æ¹–é„‰', 'å—åº„é„‰', 'ä¸‰ç£é„‰', 'ç…æ½­é„‰'],
  'å°ä¸­å¸‚': ['ä¸­å€', 'æ±å€', 'å—å€', 'è¥¿å€', 'åŒ—å€', 'è¥¿å±¯å€', 'å—å±¯å€', 'åŒ—å±¯å€', 'è±åŸå€', 'å¤§é‡Œå€', 'å¤ªå¹³å€', 'æ±å‹¢å€', 'å¤§ç”²å€', 'æ¸…æ°´å€', 'æ²™é¹¿å€', 'æ¢§æ£²å€', 'åé‡Œå€', 'ç¥å²¡å€', 'æ½­å­å€', 'å¤§é›…å€', 'æ–°ç¤¾å€', 'çŸ³å²¡å€', 'å¤–åŸ”å€', 'å¤§å®‰å€', 'çƒæ—¥å€', 'å¤§è‚šå€', 'é¾äº•å€', 'å’Œå¹³å€'],
  'å½°åŒ–ç¸£': ['å½°åŒ–å¸‚', 'é¹¿æ¸¯é®', 'å’Œç¾é®', 'ç·šè¥¿é„‰', 'ä¼¸æ¸¯é„‰', 'ç¦èˆˆé„‰', 'ç§€æ°´é„‰', 'èŠ±å£‡é„‰', 'èŠ¬åœ’é„‰', 'å“¡æ—å¸‚', 'æºªæ¹–é®', 'ç”°ä¸­é®', 'å¤§æ‘é„‰', 'åŸ”é¹½é„‰', 'åŸ”å¿ƒé„‰', 'æ°¸é–é„‰', 'ç¤¾é ­é„‰', 'äºŒæ°´é„‰', 'åŒ—æ–—é®', 'ç”°å°¾é„‰', 'åŸ¤é ­é„‰', 'æºªå·é„‰', 'ç«¹å¡˜é„‰', 'äºŒæ—é®', 'å¤§åŸé„‰', 'èŠ³è‹‘é„‰', 'ä¸‰æ°‘é„‰'],
  'å—æŠ•ç¸£': ['å—æŠ•å¸‚', 'åŸ”é‡Œé®', 'è‰å±¯é®', 'ç«¹å±±é®', 'é›†é›†é®', 'åé–“é„‰', 'é¹¿è°·é„‰', 'ä¸­å¯®é„‰', 'é­šæ± é„‰', 'åœ‹å§“é„‰', 'æ°´é‡Œé„‰', 'ä¿¡ç¾©é„‰', 'ä»æ„›é„‰'],
  'é›²æ—ç¸£': ['æ–—å…­å¸‚', 'æ–—å—é®', 'è™å°¾é®', 'è¥¿èºé®', 'åœŸåº«é®', 'åŒ—æ¸¯é®', 'å¤å‘é„‰', 'å¤§åŸ¤é„‰', 'è¿æ¡é„‰', 'æ—å…§é„‰', 'äºŒå´™é„‰', 'å´™èƒŒé„‰', 'éº¥å¯®é„‰', 'æ±å‹¢é„‰', 'è¤’å¿ é„‰', 'å°è¥¿é„‰', 'å…ƒé•·é„‰', 'å››æ¹–é„‰', 'å£æ¹–é„‰', 'æ°´æ—é„‰'],
  'å˜‰ç¾©å¸‚': ['æ±å€', 'è¥¿å€'],
  'å˜‰ç¾©ç¸£': ['å¤ªä¿å¸‚', 'æœ´å­å¸‚', 'å¸ƒè¢‹é®', 'å¤§æ—é®', 'æ°‘é›„é„‰', 'æºªå£é„‰', 'æ–°æ¸¯é„‰', 'å…­è…³é„‰', 'æ±çŸ³é„‰', 'ç¾©ç«¹é„‰', 'é¹¿è‰é„‰', 'æ°´ä¸Šé„‰', 'ä¸­åŸ”é„‰', 'ç«¹å´é„‰', 'æ¢…å±±é„‰', 'ç•ªè·¯é„‰', 'å¤§åŸ”é„‰', 'é˜¿é‡Œå±±é„‰'],
  'å°å—å¸‚': ['ä¸­è¥¿å€', 'æ±å€', 'å—å€', 'åŒ—å€', 'å®‰å¹³å€', 'å®‰å—å€', 'æ°¸åº·å€', 'æ­¸ä»å€', 'æ–°åŒ–å€', 'å·¦é®å€', 'ç‰äº•å€', 'æ¥ è¥¿å€', 'å—åŒ–å€', 'ä»å¾·å€', 'é—œå»Ÿå€', 'é¾å´å€', 'å®˜ç”°å€', 'éº»è±†å€', 'ä½³é‡Œå€', 'è¥¿æ¸¯å€', 'ä¸ƒè‚¡å€', 'å°‡è»å€', 'å­¸ç”²å€', 'åŒ—é–€å€', 'æ–°ç‡Ÿå€', 'å¾Œå£å€', 'ç™½æ²³å€', 'æ±å±±å€', 'å…­ç”²å€', 'ä¸‹ç‡Ÿå€', 'æŸ³ç‡Ÿå€', 'é¹½æ°´å€', 'å–„åŒ–å€', 'å¤§å…§å€', 'å±±ä¸Šå€', 'æ–°å¸‚å€', 'å®‰å®šå€'],
  'é«˜é›„å¸‚': ['æ–°èˆˆå€', 'å‰é‡‘å€', 'è‹“é›…å€', 'é¼“å±±å€', 'æ——æ´¥å€', 'å‰é®å€', 'ä¸‰æ°‘å€', 'æ¥ æ¢“å€', 'å°æ¸¯å€', 'å·¦ç‡Ÿå€', 'ä»æ­¦å€', 'å¤§ç¤¾å€', 'å²¡å±±å€', 'è·¯ç«¹å€', 'é˜¿è“®å€', 'ç”°å¯®å€', 'ç‡•å·¢å€', 'æ©‹é ­å€', 'æ¢“å®˜å€', 'å½Œé™€å€', 'æ°¸å®‰å€', 'æ¹–å…§å€', 'é³³å±±å€', 'å¤§å¯®å€', 'æ—åœ’å€', 'é³¥æ¾å€', 'å¤§æ¨¹å€', 'æ——å±±å€', 'ç¾æ¿ƒå€', 'å…­é¾œå€', 'ç”²ä»™å€', 'æ‰æ—å€', 'å…§é–€å€', 'èŒ‚æ—å€', 'æ¡ƒæºå€', 'é‚£ç‘ªå¤å€'],
  'å±æ±ç¸£': ['å±æ±å¸‚', 'æ½®å·é®', 'æ±æ¸¯é®', 'æ†æ˜¥é®', 'è¬ä¸¹é„‰', 'é•·æ²»é„‰', 'éºŸæ´›é„‰', 'ä¹å¦‚é„‰', 'é‡Œæ¸¯é„‰', 'é¹½åŸ”é„‰', 'é«˜æ¨¹é„‰', 'è¬å·’é„‰', 'å…§åŸ”é„‰', 'ç«¹ç”°é„‰', 'æ–°åŸ¤é„‰', 'æ‹å¯®é„‰', 'æ–°åœ’é„‰', 'å´é ‚é„‰', 'æ—é‚Šé„‰', 'å—å·é„‰', 'ä½³å†¬é„‰', 'ç‰çƒé„‰', 'è»ŠåŸé„‰', 'æ»¿å·é„‰', 'æ‹å±±é„‰', 'ä¸‰åœ°é–€é„‰', 'éœ§å°é„‰', 'ç‘ªå®¶é„‰', 'æ³°æ­¦é„‰', 'ä¾†ç¾©é„‰', 'æ˜¥æ—¥é„‰', 'ç…å­é„‰', 'ç‰¡ä¸¹é„‰'],
  'å°æ±ç¸£': ['å°æ±å¸‚', 'æˆåŠŸé®', 'é—œå±±é®', 'å‘å—é„‰', 'é¹¿é‡é„‰', 'æ± ä¸Šé„‰', 'æ±æ²³é„‰', 'é•·æ¿±é„‰', 'å¤ªéº»é‡Œé„‰', 'å¤§æ­¦é„‰', 'ç¶ å³¶é„‰', 'è˜­å¶¼é„‰', 'å»¶å¹³é„‰', 'é‡‘å³°é„‰', 'é”ä»é„‰', 'æµ·ç«¯é„‰'],
  'èŠ±è“®ç¸£': ['èŠ±è“®å¸‚', 'é³³æ—é®', 'ç‰é‡Œé®', 'æ–°åŸé„‰', 'å‰å®‰é„‰', 'å£½è±é„‰', 'å…‰å¾©é„‰', 'è±æ¿±é„‰', 'ç‘ç©—é„‰', 'è¬æ¦®é„‰', 'å¯Œé‡Œé„‰', 'ç§€æ—é„‰', 'å“æºªé„‰'],
  'å®œè˜­ç¸£': ['å®œè˜­å¸‚', 'ç¾…æ±é®', 'è˜‡æ¾³é®', 'é ­åŸé®', 'ç¤æºªé„‰', 'å£¯åœé„‰', 'å“¡å±±é„‰', 'å†¬å±±é„‰', 'äº”çµé„‰', 'ä¸‰æ˜Ÿé„‰', 'å¤§åŒé„‰', 'å—æ¾³é„‰'],
  'æ¾æ¹–ç¸£': ['é¦¬å…¬å¸‚', 'æ¹–è¥¿é„‰', 'ç™½æ²™é„‰', 'è¥¿å¶¼é„‰', 'æœ›å®‰é„‰', 'ä¸ƒç¾é„‰'],
  'é‡‘é–€ç¸£': ['é‡‘åŸé®', 'é‡‘æ²™é®', 'é‡‘æ¹–é®', 'é‡‘å¯§é„‰', 'çƒˆå¶¼é„‰', 'çƒåµé„‰'],
  'é€£æ±Ÿç¸£': ['å—ç«¿é„‰', 'åŒ—ç«¿é„‰', 'è’å…‰é„‰', 'æ±å¼•é„‰']
};

  $(function () {
    const $city = $('#city');
    const $district = $('#district');

    // Populate cities
    Object.keys(taiwan).forEach(city => $city.append(`<option value="${city}">${city}</option>`));

    // Handle district change based on city selection
    $city.on('change', function () {
      const selected = this.value;
      $district.empty();
      if (taiwan[selected]) {
        taiwan[selected].forEach(d => $district.append(`<option value="${d}">${d}</option>`));
      }
    }).trigger('change'); // Trigger change on load to populate initial districts

    nextStep(1); // Initialize to step 1
    toggleATM(); // Initialize ATM field visibility
    updateCartSummary(); // Initialize cart summary
  });
</script>
</body>
</html>